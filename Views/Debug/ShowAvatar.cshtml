@{
    ViewData["Title"] = "Avatar Test";
}

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h1>Avatar Display Test</h1>
        </div>
        <div class="card-body">
            <h2>Current User: @ViewBag.UserEmail</h2>
            
            <div class="row mb-5">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">Using ViewBag.UserAvatar</div>
                        <div class="card-body text-center">
                            <img src="@ViewBag.UserAvatar" alt="User avatar" class="img-fluid rounded-circle" 
                                 style="width: 150px; height: 150px; object-fit: cover;" />
                            <div class="mt-2">
                                <p><strong>Path:</strong> @ViewBag.UserAvatar</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">Using ViewBag.UserAvatarWithTimestamp</div>
                        <div class="card-body text-center">
                            <img src="@ViewBag.UserAvatarWithTimestamp" alt="User avatar with timestamp" class="img-fluid rounded-circle" 
                                 style="width: 150px; height: 150px; object-fit: cover;" />
                            <div class="mt-2">
                                <p><strong>Path:</strong> @ViewBag.UserAvatarWithTimestamp</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h3>Test with Different Approach</h3>
            <div class="row mb-5">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">Direct Path</div>
                        <div class="card-body text-center">
                            @{
                                var dirPath = ViewBag.UserAvatar;
                            }
                            <img src="@dirPath" alt="Direct path" class="img-fluid rounded-circle" 
                                 style="width: 100px; height: 100px; object-fit: cover;" />
                            <div class="mt-2">
                                <small>@dirPath</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">With Error Handler</div>
                        <div class="card-body text-center">
                            <img src="@ViewBag.UserAvatar" alt="With error handler" class="img-fluid rounded-circle" 
                                 style="width: 100px; height: 100px; object-fit: cover;"
                                 onerror="this.src='/images/default-avatar.png'; console.log('Error loading avatar');" />
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">Default Avatar</div>
                        <div class="card-body text-center">
                            <img src="/images/default-avatar.png" alt="Default avatar" class="img-fluid rounded-circle" 
                                 style="width: 100px; height: 100px; object-fit: cover;" />
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-3">
                <a href="/debug/check-avatar" class="btn btn-primary">Check Avatar</a>
                <a href="/Account/Profile" class="btn btn-secondary">Go to Profile</a>
            </div>
        </div>
    </div>
</div>
